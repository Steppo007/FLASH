import { Meta, Title, Canvas, Controls, Story } from '@storybook/addon-docs/blocks';
import * as metaData from './comp.stories'; 
import Example from './example'

<Meta of={metaData} />

<Title/>

### Uses: [PrimeReact TreeSelect](https://primereact.org/treeselect/)

The TreeSelect is a form component to choose from hierarchical data.

<Canvas of={metaData.Story} />

Experiment with changing the attributes below.

<Controls />

## Example Usage with PrimeReact

The KTreeSelect should be used exactly as recommended in the Primereact [documentation](https://primereact.org/treeselect/). 
Select 'Events -> Retrospective' in the example below to see how the invalid state can be used.
Furthermore, you can set an item not selectable with `selectable: false` in the model, which will look like the two parent nodes of the example ('Documents' and 'Events').

<Example/>

## Example Usage 
[comment]: # (START WRITE ./example.tsx)
[comment]: # (DO NOT EDIT: the following has been auto-generated with the command "npm run sync:docs")
```jsx
import { KTreeSelect } from '@flash/ui-components/form/ktreeselect';
import { ExampleWrapper } from '@sbook/utils';
import { TreeNode } from 'primereact/treenode';
import { TreeSelectChangeEvent } from 'primereact/treeselect';
import { useState } from 'react';

export default function Example() {
  const [nodes] = useState<TreeNode[]>(getExampleTreeNodes());
  const [selectedNodeKey, setSelectedNodeKey] = useState<string | null>(null);
  const isRetroSelected = selectedNodeKey === '1-1';

  return (
    <ExampleWrapper className="flex items-center justify-center">
      <KTreeSelect
        size="default"
        className="w-48"
        options={nodes}
        invalid={isRetroSelected}
        helperText={isRetroSelected ? 'Invalid choice' : undefined}
        floatLabel="Choose..."
        onChange={(e: TreeSelectChangeEvent) =>
          setSelectedNodeKey(e.value?.toString() ?? null)
        }
        value={selectedNodeKey}
      />
    </ExampleWrapper>
  );
}

export function getExampleTreeNodes(): TreeNode[] {
  return [
    {
      key: '0',
      label: 'Documents',
      selectable: false,
      children: [
        {
          key: '0-0',
          label: 'Work',
          children: [
            {
              key: '0-0-0',
              label: 'Expenses.doc',
            },
            {
              key: '0-0-1',
              label: 'Resume.doc',
            },
          ],
        },
        {
          key: '0-1',
          label: 'Home',
          children: [
            {
              key: '0-1-0',
              label: 'Invoices.txt',
            },
          ],
        },
      ],
    },
    {
      key: '1',
      label: 'Events',
      selectable: false,
      children: [
        {
          key: '1-0',
          label: 'Daily',
        },
        {
          key: '1-1',
          label: 'Retrospective',
        },
        {
          key: '1-2',
          label: 'Sprint Planning',
        },
      ],
    },
  ];
}
```
[comment]: # (END WRITE)